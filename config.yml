---
DEBUG:
  KeepConfigFiles: true
  KeepInstallerFiles: false
  DisplayVariables: true
  DisplayDelayInSeconds: 15


Pod:
  Number: 10
  BaseNetwork:
    IPv4: '10.203'
    IPv6: "FD00:0000:0000"


Deploy:
  Router: true
  NSXT:
    GlobalManager: false
    LocalManager: true
    CloudServicesManager: false
    Edge: true
  IPv4: true
  IPv6: false
  UseNFS: false
  UseDNS: false
  EnableSSH: true
  Software:
    vCenter:
      Vendor:  VMware
      Product: vCenter
      Version: '7.00A'
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-vCenter"
    ESXi:
      Vendor:  VMware
      Product: ESXi
      Version: '7.00'
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-ESXi"
    NSXT:
      Vendor:  VMware
      Product: NSXT
      Version: 3.0.0
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-NSXT"
    Router:
      Vendor:  VyOS
      Product: Router
      Version: Latest
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-Router.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-Router"


##
## Users should change entries in the 'Common' section to match their environment
##
Common:
  Password:
    Nested: "VMware1!"
    Physical: "VMware1!"
  DNS:
    Domain: "lab.local"
    Server1:
      IPv4: "10.203.100.254"
      IPv6: 
    Server2:
      IPv4: "10.203.100.253"
      IPv6: 
  NTP:
    Server1:
      IPv4: "{{ Net.Management.IPv4.Network }}.1"           # Replace with your IP address if Nested_Router.Version == "Legacy"
      IPv6: "{{ Net.Management.IPv6.Network }}::1"          # Replace with your IP address if Nested_Router.Version == "Legacy"
    Server2:
      IPv4: "{{ Net.Management.IPv4.Network }}.1"           # Replace with your IP address if Nested_Router.Version == "Legacy"
      IPv6: "{{ Net.Management.IPv6.Network }}::1"          # Replace with your IP address if Nested_Router.Version == "Legacy"
  Syslog:
    IPv4: "10.203.100.26"
    IPv6: 
  DiskProvisioning: "thin"
  NFS:
    Server:
      IPv4: "192.168.0.12"
      IPv6: 
    Datastore: nfs01
    Path: "/nested_nfs01"
    Type: nfs


##
## Users should specify their deployment target settings in the 'TargetConfig' section
##
TargetConfig:
  Deployment: "Host"
  Host:
    FQDN: "Host32.NetLab.Home"
    User: "root"
    Password: "{{ Common.Password.Physical }}"
    vSwitch: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
    VLAN: "{{ Net.Management.VLAN }}"
    DataCenter: "ha-datacenter"
    Cluster: ""
    Datastore: "Local_VMs"
    VMFolder: "ha-datacenter/vm"
    ISOFolder: "/Lab-ISO-Folder"
    TempFolder: "/tmp"
    PortGroup:
      VLANID: "{{ Net.Management.VLAN }}"
      VLAN:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
      Trunk: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
      RouterUplink: "Lab-Routers"
  vCenter:
    FQDN: "NetLab-vCenter.NetLab.Home"
    User: "administrator@vsphere.local"
    Password: "{{ Common.Password.Physical }}"
    vSwitch: "Lab-vDS"
    DataCenter: "NetLab"
    Cluster: "Pod-Cluster"
    Datastore: "vsanDatastore"
    VMFolder: "Nested Labs/Pod-{{ '%03d'|format(Pod.Number|int) }}"
    ISOFolder: "/Lab-ISO-Folder"
    TempFolder: "/tmp"
    PortGroup:
      VLANID: "{{ Net.Management.VLAN }}"
      VLAN:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
      Trunk: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
      RouterUplink: "Lab-Routers"


##
## Determine effective Target settings to use throughout deployment script
##
Target-Placeholder:
  Deployment: "{{ TargetConfig.Deployment }}"
  FQDN:       "{{ TargetConfig[TargetConfig.Deployment].FQDN }}"
  User:       "{{ TargetConfig[TargetConfig.Deployment].User }}"
  Password:   "{{ TargetConfig[TargetConfig.Deployment].Password }}"
  vSwitch:    "{{ TargetConfig[TargetConfig.Deployment].vSwitch }}"
  DataCenter: "{{ TargetConfig[TargetConfig.Deployment].DataCenter }}"
  Cluster:    "{{ TargetConfig[TargetConfig.Deployment].Cluster }}"
  Datastore:  "{{ TargetConfig[TargetConfig.Deployment].Datastore }}"
  VMFolder:   "{{ TargetConfig[TargetConfig.Deployment].VMFolder }}"
  ISOFolder:  "{{ TargetConfig[TargetConfig.Deployment].ISOFolder }}"
  TempFolder: "{{ TargetConfig[TargetConfig.Deployment].TempFolder }}"
  PortGroup:
    VLANID:   "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].VLANID }}"
    VLAN:     "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].VLAN }}"
    Trunk:    "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].Trunk }}"
    RouterUplink: "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].RouterUplink }}"


##
## Putting Host values directly into Target to speed up deployment
##
Target:
  Deployment: "Host"
  FQDN: "esxi03.demo.local"
  User: "root"
  Password: "{{ Common.Password.Physical }}"
  vSwitch: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
  VLAN: "{{ Net.Management.VLAN }}"
  DataCenter: "ha-datacenter"
  Cluster: ""
  Datastore: "demo_nfs01"
  VMFolder: "ha-datacenter/vm"
  ISOFolder: "/Lab-ISO-Folder"
  TempFolder: "/tmp"
  PortGroup:
    VLANID: "{{ Net.Management.VLAN }}"
    VLAN:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
    Trunk: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
    RouterUplink: "Lab-Routers"



Net:
  Management:
    Offset: 0
    VLAN: "{{ Pod.Number + 0 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 0 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+0|int) }}"
  vMotion:
    Offset: 1
    VLAN: "{{ Pod.Number + 1 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 1 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+1|int) }}"
  vSAN:
    Offset: 2
    VLAN: "{{ Pod.Number + 2 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 2 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+2|int) }}"
  IPStorage:
    Offset: 3
    VLAN: "{{ Pod.Number + 3 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 3 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+3|int) }}"
  Transport:
    Offset: 4
    VLAN: "{{ Pod.Number + 4 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 4 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+4|int) }}"
  ServiceVM:
    Offset: 5
    VLAN: "{{ Pod.Number + 5 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 5 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+5|int) }}"
  NSXEdgeUplink1:
    Offset: 6
    VLAN: "{{ Pod.Number + 6 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 6 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+6|int) }}"
  NSXEdgeUplink2:
    Offset: 7
    VLAN: "{{ Pod.Number + 7 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 7 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+7|int) }}"
  RTEP:
    Offset: 8
    VLAN: "{{ Pod.Number + 8 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 8 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+8|int) }}"
  VMNetwork:
    Offset: 9
    VLAN: "{{ Pod.Number + 9 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 9 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+9|int) }}"


Nested_Router:
  Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Router"
  Protocol: "OSPF"                          # Protocol options include "OSPF" or "Static"
  Interface:
    Uplink:
      PortGroup: "{{ Target.PortGroup.RouterUplink }}"
      IPv4:
        Address: "{{ Pod.BaseNetwork.IPv4 }}.0.{{ Pod.Number }}"
        Prefix: 24
        Gateway: "{{ Pod.BaseNetwork.IPv4 }}.0.1"
      IPv6:
        Address: "{{ Pod.BaseNetwork.IPv6 }}:0::{{ '%04d'|format(Pod.Number|int) }}"
        Prefix: 64
    Management:
      VLAN: "{{ Net.Management.VLAN }}"
      IPv4:
        Address: "{{ Net.Management.IPv4.Network }}.1"
        Prefix:  "{{ Net.Management.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.Management.IPv6.Network }}::1"
        Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    vMotion:
      VLAN: "{{ Net.vMotion.VLAN }}"
      IPv4:
        Address: "{{ Net.vMotion.IPv4.Network }}.1"
        Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.vMotion.IPv6.Network }}::1"
        Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
    vSAN:
      VLAN: "{{ Net.vSAN.VLAN }}"
      IPv4:
        Address: "{{ Net.vSAN.IPv4.Network }}.1"
        Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.vSAN.IPv6.Network }}::1"
        Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
    IPStorage:
      VLAN: "{{ Net.IPStorage.VLAN }}"
      IPv4:
        Address: "{{ Net.IPStorage.IPv4.Network }}.1"
        Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.IPStorage.IPv6.Network }}::1"
        Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    Transport:
      VLAN: "{{ Net.Transport.VLAN }}"
      IPv4:
        Address: "{{ Net.Transport.IPv4.Network }}.1"
        Prefix:  "{{ Net.Transport.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.Transport.IPv6.Network }}::1"
        Prefix:  "{{ Net.Transport.IPv6.Prefix }}"
    ServiceVM:
      VLAN: "{{ Net.ServiceVM.VLAN }}"
      IPv4:
        Address: "{{ Net.ServiceVM.IPv4.Network }}.1"
        Prefix:  "{{ Net.ServiceVM.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.ServiceVM.IPv6.Network }}::1"
        Prefix:  "{{ Net.ServiceVM.IPv6.Prefix }}"
    NSXEdgeUplink1:
      VLAN: "{{ Net.NSXEdgeUplink1.VLAN }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.1"
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::1"
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    NSXEdgeUplink2:
      VLAN: "{{ Net.NSXEdgeUplink2.VLAN }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.1"
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::1"
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
    RTEP:
      VLAN: "{{ Net.RTEP.VLAN }}"
      IPv4:
        Address: "{{ Net.RTEP.IPv4.Network }}.1"
        Prefix:  "{{ Net.RTEP.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.RTEP.IPv6.Network }}::1"
        Prefix:  "{{ Net.RTEP.IPv6.Prefix }}"
    VMNetwork:
      VLAN: "{{ Net.VMNetwork.VLAN }}"
      IPv4:
        Address: "{{ Net.VMNetwork.IPv4.Network }}.1"
        Prefix:  "{{ Net.VMNetwork.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.VMNetwork.IPv6.Network }}::1"
        Prefix:  "{{ Net.VMNetwork.IPv6.Prefix }}"
  OSPF:
    Area: 666
    RouterID: "{{ Pod.BaseNetwork.IPv4 }}.0.{{ Pod.Number }}"
  BGP:
    ASN: 65000
    RouterID: "{{ Net.Management.IPv4.Network }}.1"
    Neighbors:
    - Name: "T0-EdgeNode-1-1"
      ASN: "{{ 65000 + Pod.Number }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.2"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::2"    # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    - Name: "T0-EdgeNode-1-2"
      ASN: "{{ 65000 + Pod.Number }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.2"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::2"    # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
    - Name: "T0-EdgeNode-2-1"
      ASN: "{{ 65000 + Pod.Number }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.3"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::3"    # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    - Name: "T0-EdgeNode-2-2"
      ASN: "{{ 65000 + Pod.Number }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.3"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::3"    # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"


Nested_Clusters:
  Management:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Management_vSAN
    Prep_NSX: false
    DeployHosts: false
  Compute-A:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Compute-A_vSAN
    Prep_NSX: true
    DeployHosts: true
  Edge:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Edge_vSAN
    Prep_NSX: false
    DeployHosts: true


Nested_ESXi:
  HardwareSettings:
    Management:
      CPU: 5
      CoresPerSocket: 5
      Memory: 16348
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Compute-A:
      CPU: 8
      CoresPerSocket: 8
      Memory: 32768
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Edge:
      CPU: 8
      CoresPerSocket: 8
      Memory: 65536
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
  Hosts:
    ESXi-11:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.11{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.11"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::11"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.11"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::11"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.11"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::11"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.11"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::11"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-12:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.12{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.12"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::12"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.12"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::12"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.12"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::12"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.12"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::12"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-13:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.13{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.13"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::13"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.13"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::13"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.13"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::13"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.13"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::13"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-21:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.21{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.21"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::21"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.21"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::21"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.21"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::21"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.21"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::21"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-22:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.22{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.22"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::22"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.22"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::22"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.22"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::22"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.22"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::22"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-23:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.23{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.23"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::23"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.23"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::23"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.23"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::23"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.23"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::23"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-91:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.91{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.91"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::91"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.91"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::91"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.91"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::91"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.91"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::91"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-92:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.92{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.92"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::92"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.92"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::92"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.92"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::92"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.92"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::92"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    ESXi-93:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.93{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: Management
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.93"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::93"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: vMotion
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.93"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::93"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: vSAN
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.93"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::93"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: IPStorage
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.93"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::93"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"


Nested_vCenter:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  User: "administrator@vsphere.local"
  Password: "{{ Common.Password.Nested }}"
  DeploymentSize: small
  VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter"
  FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.10{% endif %}"
  Address:
    IPv4:
      Address: "{{ Net.Management.IPv4.Network }}.5"
      Prefix:  "{{ Net.Management.IPv4.Prefix }}"
      Gateway: "{{ Net.Management.IPv4.Network }}.1"
    IPv6:
      Address: "{{ Net.Management.IPv6.Network }}::5"
      Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  SSO:
    Domain: vsphere.local
    Site: "Pod{{ '%03d'|format(Pod.Number|int) }}-Site"
    ReplicationPartner: ''
  Datacenter: "Pod{{ '%03d'|format(Pod.Number|int) }}-DataCenter"
  Networking:
    vSwitch:
      Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
      Clusters:
      - Management
      - Compute-A
      - Edge
      Config:
        Version: "{{ Software.VMware.ESXi.Installers[Deploy.Software.ESXi.Version].vSwitch }}"
        NumberOfUplinks: 2
        MTU: 9000
        LinkDiscoveryProtocol:
          Type: lldp
          Operation: both
      PortGroup:
        Management:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Management.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vMotion:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vMotion.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vSAN:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vSAN.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        Transport:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Transport.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        ServiceVMs:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.ServiceVM.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink1:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink1.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink2:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink2.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        VMNetwork:
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.VMNetwork.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false


Nested_NSXT:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  GlobalManager:
    VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM"
    FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.7{% endif %}"
    Deployment:
      Size: small
      role: NSX Global Manager
      EnableSSH: "{{ Deploy.EnableSSH }}"
      AllowRootSSH: "{{ Deploy.EnableSSH }}"
    User:
      root:
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      admin:
        User: admin
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      audit:
        User: audit
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    Address:
      IPv4:
        Address: "{{ Net.Management.IPv4.Network }}.7"
        Prefix:  "{{ Net.Management.IPv4.Prefix }}"
        Gateway: "{{ Net.Management.IPv4.Network }}.1"
      IPv6:
        Address: "{{ Net.Management.IPv6.Network }}::7"
        Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  LocalManager:
    VMName: Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM
    FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.8{% endif %}"
    Deployment:
      Size: small
      Role: NSX Manager
      SiteName: "NSX-Site-{{ '%03d'|format(Pod.Number|int) }}"
      EnableSSH: "{{ Deploy.EnableSSH }}"
      AllowRootSSH: "{{ Deploy.EnableSSH }}"
    User:
      root:
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      admin:
        User: admin
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      audit:
        User: audit
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    Address:
      IPv4:
        Address: "{{ Net.Management.IPv4.Network }}.8"
        Prefix:  "{{ Net.Management.IPv4.Prefix }}"
        Gateway: "{{ Net.Management.IPv4.Network }}.1"
      IPv6:
        Address: "{{ Net.Management.IPv6.Network }}::8"
        Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  CloudServicesManager:
    VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM"
    FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.9{% endif %}"
    Deployment:
      Size: small
      role: "nsx-cloud-service-manager"
      EnableSSH: "{{ Deploy.EnableSSH }}"
      AllowRootSSH: "{{ Deploy.EnableSSH }}"
    User:
      root:
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      admin:
        User: admin
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      audit:
        User: audit
        Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    Address:
      IPv4:
        Address: "{{ Net.Management.IPv4.Network }}.9"
        Prefix:  "{{ Net.Management.IPv4.Prefix }}"
        Gateway: "{{ Net.Management.IPv4.Network }}.1"
      IPv6:
        Address: "{{ Net.Management.IPv6.Network }}::9"
        Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  NVDS:
    Name: "NVDS-1"
  TransportZone:
    TZ-LAN:
      Type: vlan
      Description: ''
      Switch: ''
      TeamingPolicies: []
    TZ-Edge:
      Type: vlan
      Description: ''
      Switch: ''
      TeamingPolicies: []
    TZ-Overlay:
      Description: GEVEVE Overlay Transport Zone
      Switch: ''
      TeamingPolicies: []
  Pool:
    IP:
      TEP-Pool:
        IPRange:
          IPv4:
            Start:   "{{ Net.Transport.IPv4.Network }}.10"
            End:     "{{ Net.Transport.IPv4.Network }}.99"
            Gateway: "{{ Net.Transport.IPv4.Network }}.1"
            Prefix:  "{{ Net.Transport.IPv4.Prefix }}"
          IPv6:
            Start:   "{{ Net.Transport.IPv6.Network }}::10"
            End:     "{{ Net.Transport.IPv6.Network }}::99"
            Prefix:  "{{ Net.Transport.IPv6.Prefix }}"
    VNI:
      Range:
        Start: "{{ Pod.Number * 1000 }}"
        End: "{{ (Pod.Number * 1000) + 999 }}"
  Profile:
    UplinkProfile: {}
    NIOCProfile: {}
    EdgeClusterProfile: {}
    TransportNodeProfile:
      TNP-ESXi-Hosts:
        Description: TNP for ESXi Hosts
        Switches:
        - Type: nvds
          Mode: standard
          Name: "NVDS-1"
          TransportZones:
          - TZ-Overlay
          - TZ-VLAN
  TransportNode:
    Edge:
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      DeployToCluster: Edge
      Clusters:
        T0-Edge-Cluster:
          Members:
          - "T0-EdgeNode-01"
          - "T0-EdgeNode-02"
      Nodes:
        T0-EdgeNode-01:
          DeployToHost: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.91{% endif %}"
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.101"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::101"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        T0-EdgeNode-02:
          DeployToHost: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.92{% endif %}"
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.102"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::102"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  Gateway:
    T0:
      T0-Gateway-1:
        EdgeCluster: "T0-Edge-Cluster"
        BGP:
          Self:
            Enabled: true
            ASN: "{{ 65000 + Pod.Number }}"
            InterSR: false
            MultipathRelax: true
            ECMP: true
            GracefulRestart:
              Mode: HelperOnly
              Timer: 180
              StaleTimer: 600
          Neighbors:
          - Address:
              IPv4:
                Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.1"
                Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
              IPv6:
                Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::1"
                Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
            ASN: "{{ Nested_Router.BGP.ASN }}"
            BFD: true
            AllowAS_In: false
            GracefulRestart: HelperOnly
            Timer:
              BGP:
                HoldDown: 180
                KeepAlive: 60
              BFD:
                Interval: 1000
                Multiplier: 3
          - Address:
              IPv4:
                Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.1"
                Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
              IPv6:
                Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::1"
                Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
            ASN: "{{ Nested_Router.BGP.ASN }}"
            BFD: true
            AllowAS_In: false
            GracefulRestart: HelperOnly
            Timer:
              BGP:
                HoldDown: 180
                KeepAlive: 60
              BFD:
                Interval: 1000
                Multiplier: 3
        EdgeNodes:
          T0-EdgeNode-01:
            Interface:
              Uplink1:
                IPv4:
                  Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.2"
                  Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
                  Gateway: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.1"
                IPv6:
                  Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::2"
                  Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
              Uplink2:
                IPv4:
                  Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.2"
                  Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
                  Gateway: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.1"
                IPv6:
                  Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::2"
                  Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
          T0-EdgeNode-02:
            Interface:
              Uplink1:
                IPv4:
                  Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.3"
                  Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
                  Gateway: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.1"
                IPv6:
                  Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::3"
                  Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
              Uplink2:
                IPv4:
                  Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.3"
                  Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
                  Gateway: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.1"
                IPv6:
                  Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::3"
                  Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
  Segments:
    SEG-T0-Edge-Uplink1:
      AdminStateEnabled: true
      Connectivity: 
      Description: "NSX T0-Edge Uplink 1"
      TransportZone: "TZ-Edge"
      ReplicationMode: ''
      Subnet:
        IPv4:
          Address: 
          Prefix: 24
        IPv6:
          Address: 
          Prefix: 64
      VLANS:
      - "{{ Net.NSXEdgeUplink1.VLAN }}"
    SEG-T0-Edge-Uplink2:
      AdminStateEnabled: true
      Connectivity: 
      Description: "NSX T0-Edge Uplink 2"
      TransportZone: "TZ-Edge"
      ReplicationMode: ''
      Subnet:
        IPv4:
          Address: 
          Prefix: 24
        IPv6:
          Address: 
          Prefix: 64
      VLANS:
      - "{{ Net.NSXEdgeUplink2.VLAN }}"
    SEG-Web:
      AdminStateEnabled: true
      Connectivity: 
      Description: Web Segment
      TransportZone: "TZ-Overlay"
      ReplicationMode: ''
      Subnet:
        IPv4:
          Address: "172.16.{{ Pod.Number }}.1"
          Prefix: 28
        IPv6:
          Address: 
          Prefix: 64
      VLANS: []
    SEG-App:
      AdminStateEnabled: true
      Connectivity: 
      Description: App Segment
      TransportZone: "TZ-Overlay"
      ReplicationMode: ''
      Subnet:
        IPv4:
          Address: "172.16.{{ Pod.Number + 1 }}.17"
          Prefix: 28
        IPv6:
          Address: 
          Prefix: 64
      VLANS: []
    SEG-DB:
      AdminStateEnabled: true
      Connectivity: 
      Description: DB Segment
      TransportZone: "TZ-Overlay"
      ReplicationMode: ''
      Subnet:
        IPv4:
          Address: "172.16.{{ Pod.Number + 2 }}.33"
          Prefix: 28
        IPv6:
          Address: 
          Prefix: 64
      VLANS: []
